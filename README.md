# Airdrop Smart Contract with Merkle Tree Whitelisting

## Overview

This repository contains an assignment designed to teach students how to implement a smart contract for an airdrop that uses a Merkle tree for whitelisting addresses. By completing this assignment, students will learn how to:

1. Generate a Merkle root from a list of eligible addresses.
2. Implement a Solidity smart contract that verifies claims against this Merkle root.
3. Manage the airdrop process effectively.

## Prerequisites

Before starting, ensure you have the following tools and knowledge:

- Basic understanding of Solidity and Ethereum smart contracts.
- Familiarity with Merkle trees and their usage in blockchain technology.
- Node.js and npm (Node Package Manager) installed.
- A code editor like Visual Studio Code.
- A MetaMask wallet (or similar) for interacting with the Ethereum test network.

## Project Structure

- **contracts/**: Contains the Solidity smart contract for the airdrop.
- **scripts/**: Includes scripts to generate the Merkle tree and proofs.
- **test/**: Contains test cases to verify the functionality of the smart contract.
- **airdrop.csv**: A CSV file with a list of eligible addresses and their corresponding airdrop amounts.
- **tree.json**: JSON file generated by the script, containing the Merkle tree data.
- **proofs.json**: JSON file with all proofs for each address in the whitelist.
- **README.md**: This file.

## Getting Started

### 1. Clone the Repository

```bash
git clone https://github.com/yourusername/airdrop-merkle-tree.git
cd airdrop-merkle-tree
```

### 2. Install Dependencies

```bash
npm install
```

### 3. Generate the Merkle Tree

To generate the Merkle root and proofs from the list of eligible addresses in `airdrop.csv`, run:

```bash
node scripts/generateMerkleTree.js
```

This script will create `tree.json` and `proofs.json`, which will be used by the smart contract to verify claims.

### 4. Deploy the Smart Contract

To deploy the smart contract on a local Ethereum network (like Hardhat or Ganache) or a test network, use:

```bash
npx hardhat run scripts/deploy.js --network <network-name>
```

Replace `<network-name>` with your desired network.

### 5. Interact with the Smart Contract

You can interact with the deployed contract using the Hardhat console or by creating a frontend interface.

### 6. Verify Claims

To verify a claim, the claimant must provide a proof generated in `proofs.json`. The smart contract will use the Merkle root and the provided proof to verify if the claimant is eligible for the airdrop.

## Smart Contract Overview

The smart contract is located in the `contracts/Airdrop.sol` file. It contains the following key functions:

- **`constructor(bytes32 merkleRoot)`**: Initializes the contract with the Merkle root of the whitelist.
- **`claim(uint256 amount, bytes32[] calldata merkleProof)`**: Allows users to claim their airdrop if their address and amount are in the Merkle tree. It verifies the proof against the stored Merkle root.

## How to Generate the Merkle Root and Proofs

The Merkle tree is a data structure that allows efficient and secure verification of the contents of a set. Here's how to generate the Merkle root and proofs:

1. Prepare your `airdrop.csv` file with the following columns:

   - `address`: Ethereum address of the eligible recipient.
   - `amount`: The amount of tokens to be airdropped to the address.

2. Run the script:

```bash
node scripts/generateMerkleTree.js
```

This will output two files:

- **`tree.json`**: Contains the Merkle tree data.
- **`proofs.json`**: Contains proofs for each address to be used for verification in the smart contract.

## Testing

To run the tests and ensure the smart contract functions correctly:

```bash
npx hardhat test
```
